<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agriculture Knowledge Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: grid;
            grid-template-columns: 300px 1fr;
            min-height: 80vh;
        }

        .sidebar {
            background: linear-gradient(180deg, #2d5a27 0%, #4a7c59 100%);
            color: white;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
        }

        .logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo h1 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #90EE90;
        }

        .logo p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .quick-topics {
            margin-bottom: 30px;
        }

        .quick-topics h3 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #90EE90;
        }

        .topic-btn {
            display: block;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .topic-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .features {
            margin-top: auto;
        }

        .features h3 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #90EE90;
        }

        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.85rem;
        }

        .feature-icon {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            opacity: 0.8;
        }

        .main-content {
            display: flex;
            flex-direction: column;
        }

        .header {
            background: white;
            padding: 20px 30px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .weather-widget {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 0.9rem;
            text-align: center;
            min-width: 200px;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 30px;
            background: #f8f9fa;
        }

        .chat-messages {
            flex: 1;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 18px;
            border-radius: 18px;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .message.bot .message-content {
            background: #e3f2fd;
            color: #1565c0;
            border-bottom-left-radius: 6px;
        }

        .message.user .message-content {
            background: #4caf50;
            color: white;
            border-bottom-right-radius: 6px;
        }

        .message-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            margin: 0 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .message.bot .message-avatar {
            background: #4caf50;
            color: white;
        }

        .message.user .message-avatar {
            background: #2196f3;
            color: white;
        }

        .input-section {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .input-group {
            flex: 1;
            position: relative;
        }

        .input-field {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
            resize: none;
            min-height: 50px;
            max-height: 120px;
        }

        .input-field:focus {
            border-color: #4caf50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .file-input {
            display: none;
        }

        .file-label {
            background: #ff9800;
            color: white;
            padding: 12px 15px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            width: 50px;
            height: 50px;
        }

        .file-label:hover {
            background: #f57c00;
            transform: scale(1.1);
        }

        .send-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            min-width: 80px;
            height: 50px;
        }

        .send-btn:hover:not(:disabled) {
            background: #45a049;
            transform: translateY(-2px);
        }

        .send-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            margin-bottom: 15px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
            margin-left: 45px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4caf50;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        .image-preview {
            max-width: 200px;
            max-height: 200px;
            border-radius: 10px;
            margin-top: 10px;
            cursor: pointer;
        }

        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .welcome-message h2 {
            color: #4caf50;
            margin-bottom: 15px;
        }

        .example-queries {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .example-query {
            background: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .example-query:hover {
            border-color: #4caf50;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                margin: 10px;
            }
            
            .sidebar {
                display: none;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .weather-widget {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">
                <h1>🌾 AgriBot</h1>
                <p>Your Smart Farming Assistant</p>
            </div>
            
            <div class="quick-topics">
                <h3>Quick Topics</h3>
                <button class="topic-btn" onclick="askQuestion('How do I test soil pH?')">Soil Testing</button>
                <button class="topic-btn" onclick="askQuestion('Best crops for monsoon season?')">Seasonal Crops</button>
                <button class="topic-btn" onclick="askQuestion('How to identify plant diseases?')">Plant Diseases</button>
                <button class="topic-btn" onclick="askQuestion('Organic fertilizer recommendations?')">Fertilizers</button>
                <button class="topic-btn" onclick="askQuestion('Pest control methods?')">Pest Control</button>
                <button class="topic-btn" onclick="askQuestion('Irrigation scheduling tips?')">Irrigation</button>
            </div>
            
            <div class="features">
                <h3>Features</h3>
                <div class="feature-item">
                    <span class="feature-icon">🤖</span>
                    AI-Powered Advice
                </div>
                <div class="feature-item">
                    <span class="feature-icon">📸</span>
                    Image Analysis
                </div>
                <div class="feature-item">
                    <span class="feature-icon">🌡️</span>
                    Weather Integration
                </div>
                <div class="feature-item">
                    <span class="feature-icon">🌍</span>
                    Regional Knowledge
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="header">
                <h2>Agriculture Knowledge Assistant</h2>
                <div class="weather-widget" id="weather">
                    <div>🌤️ Loading weather...</div>
                </div>
            </div>

            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="welcome-message">
                        <h2>Welcome to your Agriculture Assistant! 🌱</h2>
                        <p>I'm here to help you with farming questions, crop advice, soil management, pest control, and more. Try asking me something or click on the examples below:</p>
                        
                        <div class="example-queries">
                            <div class="example-query" onclick="askQuestion('What are the best crops to grow in clay soil?')">
                                <strong>🌱 Soil & Crops</strong>
                                <p>Best crops for clay soil?</p>
                            </div>
                            <div class="example-query" onclick="askQuestion('How do I identify and treat tomato blight?')">
                                <strong>🍅 Disease Control</strong>
                                <p>Identify tomato blight?</p>
                            </div>
                            <div class="example-query" onclick="askQuestion('When is the best time to plant wheat?')">
                                <strong>⏰ Planting Schedule</strong>
                                <p>When to plant wheat?</p>
                            </div>
                            <div class="example-query" onclick="askQuestion('How to make organic compost at home?')">
                                <strong>♻️ Organic Farming</strong>
                                <p>Make organic compost?</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="typing-indicator" id="typingIndicator">
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                    <span style="margin-left: 10px; color: #666;">AgriBot is thinking...</span>
                </div>

                <div class="input-section">
                    <label for="imageInput" class="file-label" title="Upload crop/soil image">
                        📸
                    </label>
                    <input type="file" id="imageInput" class="file-input" accept="image/*" onchange="handleImageUpload(event)">
                    
                    <div class="input-group">
                        <textarea 
                            id="userInput" 
                            class="input-field" 
                            placeholder="Ask me about crops, soil, pests, weather, or farming techniques..."
                            rows="1"
                            onkeypress="handleKeyPress(event)"
                        ></textarea>
                    </div>
                    
                    <button class="send-btn" onclick="sendMessage()" id="sendBtn">
                        Send
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Agricultural knowledge base
        const agricultureKB = {
            crops: {
                rice: { season: 'kharif', soil: 'clay-loam', water: 'high', duration: '90-120 days' },
                wheat: { season: 'rabi', soil: 'loam', water: 'moderate', duration: '110-130 days' },
                corn: { season: 'kharif', soil: 'well-drained', water: 'moderate', duration: '80-110 days' },
                tomato: { season: 'year-round', soil: 'well-drained-loam', water: 'moderate', duration: '70-100 days' },
                potato: { season: 'rabi', soil: 'sandy-loam', water: 'moderate', duration: '70-90 days' },
                cotton: { season: 'kharif', soil: 'black-cotton', water: 'moderate', duration: '150-180 days' },
                sugarcane: { season: 'year-round', soil: 'heavy-loam', water: 'high', duration: '12-18 months' },
                onion: { season: 'rabi', soil: 'well-drained', water: 'moderate', duration: '90-120 days' }
            },
            
            soilTypes: {
                clay: 'Heavy soil, retains water well, good for rice. Improve drainage with organic matter.',
                loam: 'Best all-purpose soil, good drainage and fertility. Ideal for most crops.',
                sandy: 'Drains quickly, warms up fast. Good for root vegetables. Needs frequent watering.',
                silt: 'Fertile soil, retains moisture. Can become waterlogged, needs drainage.',
                'black-cotton': 'Rich in clay, excellent for cotton. Expands when wet, shrinks when dry.'
            },
            
            pests: {
                aphids: 'Small green/black insects on leaves. Use neem oil or ladybugs for control.',
                'bollworm': 'Caterpillars that attack cotton bolls. Use pheromone traps and Bt spray.',
                'stem-borer': 'Affects rice stems. Use resistant varieties and proper water management.',
                'fruit-fly': 'Damages fruits. Use yellow sticky traps and protein baits.',
                'thrips': 'Tiny insects causing silver streaks on leaves. Use blue sticky traps.'
            },
            
            diseases: {
                blight: 'Fungal disease causing dark spots on leaves. Use copper fungicide and improve air circulation.',
                rust: 'Orange/brown pustules on leaves. Remove affected parts and use resistant varieties.',
                'powdery-mildew': 'White powder on leaves. Improve air circulation and use sulfur spray.',
                'root-rot': 'Caused by overwatering. Improve drainage and reduce watering frequency.',
                mosaic: 'Virus causing mottled leaves. Remove affected plants and control aphid vectors.'
            },
            
            fertilizers: {
                nitrogen: 'Promotes leaf growth. Use urea, ammonium sulfate, or compost.',
                phosphorus: 'Supports root development and flowering. Use bone meal or rock phosphate.',
                potassium: 'Improves disease resistance and fruit quality. Use wood ash or potash.',
                organic: 'Compost, manure, and green manure improve soil health naturally.',
                micronutrients: 'Iron, zinc, boron needed in small amounts. Use foliar sprays if deficient.'
            }
        };

        let chatHistory = [];
        let currentImage = null;

        // Initialize the application
        function init() {
            loadWeather();
            setupEventListeners();
        }

        function setupEventListeners() {
            const userInput = document.getElementById('userInput');
            userInput.addEventListener('input', autoResize);
        }

        function autoResize() {
            const userInput = document.getElementById('userInput');
            userInput.style.height = 'auto';
            userInput.style.height = userInput.scrollHeight + 'px';
        }

        function loadWeather() {
            // Simulated weather data - in production, integrate with weather API
            const weatherData = {
                location: 'Salem, Tamil Nadu',
                temperature: '28°C',
                humidity: '75%',
                condition: 'Partly Cloudy',
                rainfall: '2mm expected'
            };
            
            document.getElementById('weather').innerHTML = `
                <div><strong>${weatherData.location}</strong></div>
                <div>${weatherData.temperature} | ${weatherData.condition}</div>
                <div>Humidity: ${weatherData.humidity}</div>
            `;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function askQuestion(question) {
            document.getElementById('userInput').value = question;
            sendMessage();
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    currentImage = e.target.result;
                    // You could show a preview here
                    console.log('Image uploaded successfully');
                };
                reader.readAsDataURL(file);
            }
        }

        function sendMessage() {
            const userInput = document.getElementById('userInput');
            const message = userInput.value.trim();
            
            if (!message && !currentImage) return;
            
            // Clear input and disable send button
            userInput.value = '';
            userInput.style.height = 'auto';
            document.getElementById('sendBtn').disabled = true;
            
            // Add user message
            if (message) {
                addMessage('user', message);
            }
            
            if (currentImage) {
                addMessage('user', 'I\'ve uploaded an image for analysis.', currentImage);
                currentImage = null;
                document.getElementById('imageInput').value = '';
            }
            
            // Show typing indicator
            showTypingIndicator();
            
            // Generate AI response with delay
            setTimeout(() => {
                const response = generateAIResponse(message);
                hideTypingIndicator();
                addMessage('bot', response);
                document.getElementById('sendBtn').disabled = false;
            }, 1500 + Math.random() * 1000);
        }

        function addMessage(type, content, image = null) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = type === 'user' ? 'You' : '🤖';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.innerHTML = content;
            
            if (image) {
                const imgElement = document.createElement('img');
                imgElement.src = image;
                imgElement.className = 'image-preview';
                imgElement.onclick = () => window.open(image, '_blank');
                messageContent.appendChild(imgElement);
            }
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            chatMessages.appendChild(messageDiv);
            
            // Hide welcome message
            const welcomeMessage = chatMessages.querySelector('.welcome-message');
            if (welcomeMessage) {
                welcomeMessage.style.display = 'none';
            }
            
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'flex';
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        function generateAIResponse(query) {
            if (!query) {
                return "I see you've uploaded an image! While I can't analyze images directly in this demo, I can help you with:\n\n• **Plant Disease Identification**: Describe the symptoms you see\n• **Pest Problems**: Tell me what insects or damage you notice\n• **Soil Issues**: Describe soil color, texture, or plant health\n• **General Crop Advice**: Ask about the crop in the image\n\nWhat specific issue would you like help with?";
            }
            
            const lowerQuery = query.toLowerCase();
            
            // Crop recommendations
            if (lowerQuery.includes('crop') || lowerQuery.includes('plant') || lowerQuery.includes('grow')) {
                if (lowerQuery.includes('clay')) {
                    return "**Best crops for clay soil:**\n\n🌾 **Rice** - Excellent choice as clay retains water well\n🌽 **Wheat** - Thrives in clay-loam conditions\n🥔 **Root vegetables** like carrots and beets\n🌿 **Legumes** like beans help improve soil structure\n\n**Tips:** Add organic compost to improve drainage and soil structure. Clay soil is nutrient-rich but may need better drainage for some crops.";
                }
                if (lowerQuery.includes('sandy')) {
                    return "**Best crops for sandy soil:**\n\n🥕 **Root vegetables** - Carrots, radishes, turnips\n🥔 **Potatoes** - Excellent drainage prevents rot\n🌿 **Herbs** - Most herbs prefer well-drained soil\n🍉 **Melons** - Watermelons and cantaloupes\n\n**Tips:** Sandy soil drains quickly, so increase watering frequency and add organic matter to retain nutrients.";
                }
                if (lowerQuery.includes('monsoon') || lowerQuery.includes('rainy')) {
                    return "**Best crops for monsoon season (Kharif):**\n\n🌾 **Rice** - Primary monsoon crop\n🌽 **Maize/Corn** - Good for moderate rainfall areas\n🌿 **Cotton** - Requires good rainfall initially\n🫘 **Pulses** - Arhar, moong, urad\n🌻 **Sugarcane** - Can be planted year-round\n\n**Tips:** Ensure good drainage to prevent waterlogging. Start seeds indoors if heavy rains expected.";
                }
                return "I can help you choose the right crops! Please tell me:\n\n• What type of soil do you have? (clay, sandy, loam)\n• What season are you planting for?\n• What's your local climate like?\n• How much water is available?\n\nThis will help me give you specific crop recommendations! 🌱";
            }
            
            // Soil testing and management
            if (lowerQuery.includes('soil') && (lowerQuery.includes('test') || lowerQuery.includes('ph'))) {
                return "**How to test soil pH and nutrients:**\n\n📋 **Simple pH test:**\n• Buy pH test strips or digital meter\n• Mix soil with distilled water (1:1 ratio)\n• Test the mixture\n\n🎯 **Ideal pH levels:**\n• Most crops: 6.0-7.0\n• Acid-loving crops: 5.5-6.5\n• Alkaline crops: 7.0-8.0\n\n🧪 **Professional testing:**\n• Contact local agricultural extension office\n• Tests for N-P-K, organic matter, micronutrients\n• Usually costs ₹100-500\n\n**Quick indicators:** Dark, crumbly soil with earthworms = healthy soil!";
            }
            
            // Disease identification and treatment
            if (lowerQuery.includes('disease') || lowerQuery.includes('blight') || lowerQuery.includes('fungus')) {
                if (lowerQuery.includes('tomato')) {
                    return "**Common tomato diseases:**\n\n🍅 **Early Blight**\n• Brown spots with concentric rings on leaves\n• Treatment: Copper fungicide, improve air circulation\n\n🍅 **Late Blight**\n• Dark, water-soaked spots spreading quickly\n• Treatment: Remove affected plants, use preventive fungicide\n\n🍅 **Bacterial Wilt**\n• Sudden wilting despite adequate water\n• Treatment: Remove plants, rotate crops, improve drainage\n\n**Prevention:** Space plants well, water at soil level, use resistant varieties.";
                }
                return "**Common plant diseases:**\n\n🦠 **Fungal diseases** - Dark spots, powdery coating, wilting\n🦠 **Bacterial diseases** - Water-soaked spots, sudden wilting\n🦠 **Viral diseases** - Mottled leaves, stunted growth\n\n**General treatment:**\n• Remove affected plant parts\n• Improve air circulation\n• Use copper or neem-based fungicides\n• Avoid overhead watering\n\n**Upload an image** or describe symptoms for specific diagnosis!";
            }
            
            // Pest control
            if (lowerQuery.includes('pest') || lowerQuery.includes('insect') || lowerQuery.includes('bug')) {
                return "**Integrated Pest Management (IPM):**\n\n🐛 **Common pests & solutions:**\n• **Aphids** - Neem oil, ladybugs, strong water spray\n• **Caterpillars** - Bt spray, hand-picking, pheromone traps\n• **Thrips** - Blue sticky traps, beneficial insects\n• **Whiteflies** - Yellow sticky traps, neem oil\n\n🌿 **Natural methods:**\n• Companion planting (marigolds, basil)\n• Beneficial insects (ladybugs, parasitic wasps)\n• Neem oil and soap sprays\n\n**Prevention is key:** Crop rotation, healthy soil, proper spacing!";
            }
            
            // Fertilizer recommendations
            if (lowerQuery.includes('fertilizer') || lowerQuery.includes('nutrient') || lowerQuery.includes('compost')) {
                if (lowerQuery.includes('organic')) {
                    return "**Organic fertilizer options:**\n\n🌿 **Homemade compost:**\n• Kitchen scraps, leaves, grass clippings\n• Ready in 3-6 months\n• Improves soil structure and fertility\n\n🐄 **Animal manures:**\n• Cow, chicken, goat manure\n• Compost for 3-6 months before use\n• Rich in nitrogen and organic matter\n\n🌱 **Other organic options:**\n• Bone meal (phosphorus)\n• Wood ash (potassium)\n• Fish emulsion (quick nitrogen)\n• Seaweed extract (micronutrients)\n\n**Application:** Use 2-3 inches of compost annually, work into top 6 inches of soil.";
                }
                return "**Fertilizer basics (N-P-K):**\n\n🌿 **Nitrogen (N)** - Leaf growth\n• Sources: Urea, ammonium sulfate, compost\n• Signs of deficiency: Yellow leaves\n\n🌺 **Phosphorus (P)** - Roots & flowers\n• Sources: Bone meal, rock phosphate\n• Signs of deficiency: Purple leaves, poor flowering\n\n🍎 **Potassium (K)** - Disease resistance\n• Sources: Wood ash, potash, compost\n• Signs of deficiency: Brown leaf edges\n\n**General ratio:** Use 10-10-10 for most vegetables, higher N for leafy greens!";
            }
            
            // Weather-related advice
            if (lowerQuery.includes('weather') || lowerQuery.includes('rain') || lowerQuery.includes('drought')) {
                return "**Weather-based farming tips:**\n\n☔ **During heavy rains:**\n• Ensure proper drainage in fields\n• Harvest mature crops quickly\n• Apply fungicides preventively\n• Cover sensitive plants\n\n☀️ **During drought:**\n• Use mulch to retain soil moisture\n• Water deeply but less frequently\n• Choose drought-resistant varieties\n• Install drip irrigation if possible\n\n🌡️ **Temperature extremes:**\n• Use shade cloth in extreme heat\n• Cover crops during frost warnings\n• Plant according to local climate zones";
            }
            
            // Irrigation advice
            if (lowerQuery.includes('water') || lowerQuery.includes('irrigation') || lowerQuery.includes('drought')) {
                return "**Smart irrigation practices:**\n\n💧 **Watering schedule:**\n• Early morning (6-8 AM) is best\n• Deep watering 2-3 times per week better than daily light watering\n• Check soil moisture 2-3 inches deep\n\n🚿 **Irrigation methods:**\n• **Drip irrigation** - Most efficient, reduces disease\n• **Sprinkler** - Good for large areas, avoid during windy/hot weather\n• **Furrow** - Traditional method for row crops\n\n📏 **Water requirements:**\n• Vegetables: 1-1.5 inches per week\n• Fruit trees: Deep weekly watering\n• Newly planted: Daily until established\n\n**Water-saving tips:** Mulch, rainwater harvesting, drought-resistant varieties!";
            }
            
            // Seasonal planting advice
            if (lowerQuery.includes('when') && (lowerQuery.includes('plant') || lowerQuery.includes('sow'))) {
                if (lowerQuery.includes('wheat')) {
                    return "**Wheat planting schedule:**\n\n🌾 **Best time:** October-December (Rabi season)\n\n📅 **Regional timing:**\n• North India: Mid-November to mid-December\n• Central India: Late November to December\n• South India: October to November\n\n🌡️ **Conditions needed:**\n• Temperature: 15-20°C for germination\n• Soil temperature: Above 10°C\n• Well-drained loamy soil\n• pH 6.0-7.5\n\n⏰ **Growth stages:**\n• Germination: 7-10 days\n• Tillering: 30-40 days after sowing\n• Flowering: 60-70 days\n• Harvest: 110-130 days\n\n**Tip:** Plant after rice harvest when soil has good moisture content!";
                }
                return "**Seasonal planting guide for India:**\n\n🌦️ **Kharif (Monsoon) - June-July:**\n• Rice, maize, cotton, sugarcane\n• Millets, pulses, oilseeds\n\n❄️ **Rabi (Winter) - October-December:**\n• Wheat, barley, mustard, gram\n• Peas, lentils, onions\n\n☀️ **Zaid (Summer) - February-March:**\n• Fodder crops, vegetables\n• Watermelon, muskmelon\n\n🥬 **Year-round vegetables:**\n• Tomato, okra, brinjal, chili\n• Coriander, spinach, radish\n\n**Always check local weather patterns and soil conditions before planting!**";
            }
            
            // Organic farming
            if (lowerQuery.includes('organic') && !lowerQuery.includes('fertilizer')) {
                return "**Organic farming practices:**\n\n🌱 **Soil health:**\n• Add 2-3 inches compost annually\n• Use cover crops to fix nitrogen\n• Practice crop rotation\n• Avoid synthetic chemicals\n\n🐛 **Natural pest control:**\n• Beneficial insects (ladybugs, lacewings)\n• Companion planting (basil with tomatoes)\n• Neem oil and soap sprays\n• Physical barriers and traps\n\n🌿 **Natural fertilizers:**\n• Compost and worm castings\n• Green manure crops\n• Bone meal and kelp meal\n• Liquid fertilizers from compost tea\n\n**Certification:** Contact local organic certification bodies for commercial organic farming requirements.";
            }
            
            // Market and economics
            if (lowerQuery.includes('price') || lowerQuery.includes('market') || lowerQuery.includes('profit')) {
                return "**Agricultural market insights:**\n\n📊 **Price factors:**\n• Seasonal demand and supply\n• Weather conditions affecting yield\n• Government policies and MSP\n• Export-import regulations\n\n💰 **Profitable crops (general):**\n• High-value vegetables (capsicum, broccoli)\n• Medicinal plants (aloe vera, tulsi)\n• Exotic fruits (dragon fruit, avocado)\n• Spices (cardamom, saffron)\n\n📱 **Market information sources:**\n• eNAM (National Agriculture Market)\n• Kisan Call Center (1551)\n• Agricultural Marketing Division websites\n• Local mandi prices\n\n**Tip:** Diversify crops and consider value addition (processing) to increase profits!";
            }
            
            // Storage and post-harvest
            if (lowerQuery.includes('storage') || lowerQuery.includes('harvest') || lowerQuery.includes('preserve')) {
                return "**Post-harvest management:**\n\n🌾 **Grain storage:**\n• Dry to 12-14% moisture content\n• Use airtight containers or silos\n• Add neem leaves or diatomaceous earth\n• Check regularly for pests\n\n🥬 **Vegetable storage:**\n• Harvest at right maturity\n• Cool quickly after harvest\n• Maintain proper humidity\n• Use proper packaging\n\n📦 **Storage structures:**\n• Traditional: Kothar, bins\n• Modern: Cold storage, CA storage\n• On-farm: Improved bins with pest control\n\n**Reduce losses:** Proper timing, handling, and storage can reduce post-harvest losses by 20-40%!";
            }
            
            // Default response for unmatched queries
            if (lowerQuery.includes('hello') || lowerQuery.includes('hi') || lowerQuery.includes('help')) {
                return "Hello! I'm your Agriculture Knowledge Assistant! 🌾\n\nI can help you with:\n\n• **Crop selection** and planting schedules\n• **Soil testing** and management\n• **Pest and disease** identification\n• **Fertilizer** recommendations\n• **Irrigation** and water management\n• **Weather-based** farming advice\n• **Organic farming** practices\n• **Market information** and profitable crops\n\nWhat would you like to know about farming today?";
            }
            
            // Catch-all response with suggestions
            return `I understand you're asking about "${query}". Let me provide some general guidance:\n\n🌱 **For specific crop advice**, tell me:\n• What crop are you growing?\n• What's your soil type?\n• What problems are you facing?\n\n📸 **For disease/pest identification:**\n• Describe the symptoms you see\n• Upload an image if possible\n• Mention which plant parts are affected\n\n🌍 **For location-specific advice:**\n• Mention your region/state\n• Describe your local climate\n• Tell me about your farming setup\n\nI'm here to help with all aspects of farming - just be more specific about your question!`;
        }

        // Initialize the app when page loads
        window.onload = init;
    </script>
</body>
</html>